<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public Documentation · BlockArrays.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>BlockArrays.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../man/abstractblockarrayinterface.html">The AbstractBlockArray interface</a></li><li><a class="toctext" href="../man/blockarrays.html">BlockArrays</a></li><li><a class="toctext" href="../man/pseudoblockarrays.html">PseudoBlockArrays</a></li></ul></li><li><span class="toctext">API</span><ul><li class="current"><a class="toctext" href="public.html">Public Documentation</a><ul class="internal"><li><a class="toctext" href="#Contents-1">Contents</a></li><li><a class="toctext" href="#Index-1">Index</a></li><li><a class="toctext" href="#AbstractBlockArray-interface-1">AbstractBlockArray interface</a></li><li><a class="toctext" href="#BlockArray-1">BlockArray</a></li><li><a class="toctext" href="#PseudoBlockArray-1">PseudoBlockArray</a></li></ul></li><li><a class="toctext" href="internals.html">Internal Documentation</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>API</li><li><a href="public.html">Public Documentation</a></li></ul><a class="edit-page" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/master/docs/src/lib/public.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Public Documentation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Public-Documentation-1" href="#Public-Documentation-1">Public Documentation</a></h1><p>Documentation for <code>BlockArrays.jl</code>&#39;s public interface.</p><p>See <a href="internals.html#Internal-Documentation-1">Internal Documentation</a> for internal package docs covering all submodules.</p><h2><a class="nav-anchor" id="Contents-1" href="#Contents-1">Contents</a></h2><ul><li><a href="public.html#Public-Documentation-1">Public Documentation</a></li><ul><li><a href="public.html#Contents-1">Contents</a></li><li><a href="public.html#Index-1">Index</a></li><li><a href="public.html#AbstractBlockArray-interface-1">AbstractBlockArray interface</a></li><li><a href="public.html#BlockArray-1">BlockArray</a></li><li><a href="public.html#PseudoBlockArray-1">PseudoBlockArray</a></li></ul></ul><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="public.html#BlockArrays.uninitialized_blocks"><code>BlockArrays.uninitialized_blocks</code></a></li><li><a href="public.html#BlockArrays.AbstractBlockArray"><code>BlockArrays.AbstractBlockArray</code></a></li><li><a href="public.html#BlockArrays.Block"><code>BlockArrays.Block</code></a></li><li><a href="public.html#BlockArrays.BlockArray"><code>BlockArrays.BlockArray</code></a></li><li><a href="public.html#BlockArrays.BlockBoundsError"><code>BlockArrays.BlockBoundsError</code></a></li><li><a href="public.html#BlockArrays.BlockIndex"><code>BlockArrays.BlockIndex</code></a></li><li><a href="public.html#BlockArrays.PseudoBlockArray"><code>BlockArrays.PseudoBlockArray</code></a></li><li><a href="public.html#BlockArrays.UninitializedBlocks"><code>BlockArrays.UninitializedBlocks</code></a></li><li><a href="public.html#Core.Array"><code>Core.Array</code></a></li><li><a href="public.html#BlockArrays.blockcheckbounds"><code>BlockArrays.blockcheckbounds</code></a></li><li><a href="public.html#BlockArrays.blocksize"><code>BlockArrays.blocksize</code></a></li><li><a href="public.html#BlockArrays.getblock"><code>BlockArrays.getblock</code></a></li><li><a href="public.html#BlockArrays.getblock!"><code>BlockArrays.getblock!</code></a></li><li><a href="public.html#BlockArrays.nblocks"><code>BlockArrays.nblocks</code></a></li><li><a href="public.html#BlockArrays.setblock!"><code>BlockArrays.setblock!</code></a></li></ul><h2><a class="nav-anchor" id="AbstractBlockArray-interface-1" href="#AbstractBlockArray-interface-1">AbstractBlockArray interface</a></h2><p>This sections defines the functions a subtype of <code>AbstractBlockArray</code> should define to be a part of the <code>AbstractBlockArray</code> interface. An <code>AbstractBlockArray{T, N}</code> is a subtype of <code>AbstractArray{T,N}</code> and should therefore also fulfill the <a href="http://docs.julialang.org/en/latest/manual/interfaces/#abstract-arrays"><code>AbstractArray</code> interface</a>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.AbstractBlockArray" href="#BlockArrays.AbstractBlockArray"><code>BlockArrays.AbstractBlockArray</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">abstract AbstractBlockArray{T, N} &lt;: AbstractArray{T, N}</code></pre><p>The abstract type that represents a blocked array. Types that implement the <code>AbstractBlockArray</code> interface should subtype from this type.</p><p>** Typealiases **</p><ul><li><p><code>AbstractBlockMatrix{T}</code> -&gt; <code>AbstractBlockArray{T, 2}</code></p></li><li><p><code>AbstractBlockVector{T}</code> -&gt; <code>AbstractBlockArray{T, 1}</code></p></li><li><p><code>AbstractBlockVecOrMat{T}</code> -&gt; <code>Union{AbstractBlockMatrix{T}, AbstractBlockVector{T}}</code></p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L5-L18">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.BlockBoundsError" href="#BlockArrays.BlockBoundsError"><code>BlockArrays.BlockBoundsError</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">BlockBoundsError([A], [inds...])</code></pre><p>Thrown when a block indexing operation into a block array, <code>A</code>, tried to access an out-of-bounds block, <code>inds</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L234-L238">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.Block" href="#BlockArrays.Block"><code>BlockArrays.Block</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Block(inds...)</code></pre><p>A <code>Block</code> is simply a wrapper around a set of indices or enums so that it can be used to dispatch on. By indexing a <code>AbstractBlockArray</code> with a <code>Block</code> the a block at that block index will be returned instead of a single element.</p><pre><code class="language-julia-repl">julia&gt; A = BlockArray(ones(2,3), [1, 1], [2, 1])
2×2-blocked 2×3 BlockArrays.BlockArray{Float64,2,Array{Float64,2}}:
 1.0  1.0  │  1.0
 ----------┼-----
 1.0  1.0  │  1.0

julia&gt; A[Block(1, 1)]
1×2 Array{Float64,2}:
 1.0  1.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L78-L96">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.BlockIndex" href="#BlockArrays.BlockIndex"><code>BlockArrays.BlockIndex</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">BlockIndex{N}</code></pre><p>A <code>BlockIndex</code> is an index which stores a global index in two parts: the block and the offset index into the block.</p><p>It can be used to index into <code>BlockArrays</code> in the following manner:</p><pre><code class="language-julia-repl">julia&gt; arr = Array(reshape(1:25, (5,5)));

julia&gt; a = PseudoBlockArray(arr, [3,2], [1,4])
2×2-blocked 5×5 BlockArrays.PseudoBlockArray{Int64,2,Array{Int64,2}}:
 1  │   6  11  16  21
 2  │   7  12  17  22
 3  │   8  13  18  23
 ───┼────────────────
 4  │   9  14  19  24
 5  │  10  15  20  25

julia&gt; a[BlockIndex((1,2), (1,2))]
11

julia&gt; a[BlockIndex((2,2), (2,3))]
20</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/blockindices.jl#L1-L27">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.nblocks" href="#BlockArrays.nblocks"><code>BlockArrays.nblocks</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">nblocks(A, [dim...])</code></pre><p>Returns a tuple containing the number of blocks in a block array.  Optionally you can specify the dimension(s) you want the number of blocks for.</p><pre><code class="language-julia-repl">julia&gt; A =  BlockArray(rand(5,4,6), [1,4], [1,2,1], [1,2,2,1]);

julia&gt; nblocks(A)
(2, 3, 4)

julia&gt; nblocks(A, 2)
3

julia&gt; nblocks(A, 3, 2)
(4, 3)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L29-L47">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.blocksize" href="#BlockArrays.blocksize"><code>BlockArrays.blocksize</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">blocksize(A, inds...)</code></pre><p>Returns a tuple containing the size of the block at block index <code>inds...</code>.</p><pre><code class="language-julia-repl">julia&gt; A = BlockArray(rand(5, 4, 6), [1, 4], [1, 2, 1], [1, 2, 2, 1]);

julia&gt; blocksize(A, 1, 3, 2)
(1, 1, 2)

julia&gt; blocksize(A, 2, 1, 3)
(4, 1, 2)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L59-L73">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.getblock" href="#BlockArrays.getblock"><code>BlockArrays.getblock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">getblock(A, inds...)</code></pre><p>Returns the block at blockindex <code>inds...</code>. An alternative syntax is <code>A[Block(inds...)]. Throws a</code>BlockBoundsError` if this block is out of bounds.</p><pre><code class="language-julia-repl">julia&gt; v = Array(reshape(1:6, (2, 3)))
2×3 Array{Int64,2}:
 1  3  5
 2  4  6

julia&gt; A = BlockArray(v, [1,1], [2,1])
2×2-blocked 2×3 BlockArrays.BlockArray{Int64,2,Array{Int64,2}}:
 1  3  │  5
 ------┼---
 2  4  │  6

julia&gt; getblock(A, 2, 1)
1×2 Array{Int64,2}:
 2  4

julia&gt; A[Block(1, 2)]
1×1 Array{Int64,2}:
 5</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L146-L172">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.getblock!" href="#BlockArrays.getblock!"><code>BlockArrays.getblock!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">getblock!(X, A, inds...)</code></pre><p>Stores the block at blockindex <code>inds</code> in <code>X</code> and returns it. Throws a <code>BlockBoundsError</code> if the attempted assigned block is out of bounds.</p><pre><code class="language-julia-repl">julia&gt; A = PseudoBlockArray(ones(2, 3), [1, 1], [2, 1])
2×2-blocked 2×3 BlockArrays.PseudoBlockArray{Float64,2,Array{Float64,2}}:
 1.0  1.0  │  1.0
 ----------┼-----
 1.0  1.0  │  1.0

julia&gt; x = zeros(1, 2);

julia&gt; getblock!(x, A, 2, 1);

julia&gt; x
1×2 Array{Float64,2}:
 1.0  1.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L179-L200">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.setblock!" href="#BlockArrays.setblock!"><code>BlockArrays.setblock!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">setblock!(A, v, inds...)</code></pre><p>Stores the block <code>v</code> in the block at block index <code>inds</code> in <code>A</code>. An alternative syntax is <code>A[Block(inds...)] = v</code>. Throws a <code>BlockBoundsError</code> if this block is out of bounds.</p><pre><code class="language-julia-repl">julia&gt; A = PseudoBlockArray(zeros(2, 3), [1, 1], [2, 1]);

julia&gt; setblock!(A, [1 2], 1, 1);

julia&gt; A[Block(2, 1)] = [3 4];

julia&gt; A
2×2-blocked 2×3 BlockArrays.PseudoBlockArray{Float64,2,Array{Float64,2}}:
 1.0  2.0  │  0.0
 ----------┼-----
 3.0  4.0  │  0.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L207-L226">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Core.Array" href="#Core.Array"><code>Core.Array</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Array(A::AbstractBlockArray)</code></pre><p>Returns the array stored in <code>A</code> as a <code>Array</code>.</p><pre><code class="language-julia-repl">julia&gt; A = BlockArray(ones(2,3), [1,1], [2,1])
2×2-blocked 2×3 BlockArrays.BlockArray{Float64,2,Array{Float64,2}}:
 1.0  1.0  │  1.0
 ----------┼-----
 1.0  1.0  │  1.0

julia&gt; Array(A)
2×3 Array{Float64,2}:
 1.0  1.0  1.0
 1.0  1.0  1.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L297-L314">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.blockcheckbounds" href="#BlockArrays.blockcheckbounds"><code>BlockArrays.blockcheckbounds</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">blockcheckbounds(A, inds...)</code></pre><p>Throw a <code>BlockBoundsError</code> if the specified block indexes are not in bounds for the given block array. Subtypes of <code>AbstractBlockArray</code> should specialize this method if they need to provide custom block bounds checking behaviors.</p><pre><code class="language-julia-repl">julia&gt; A = BlockArray(rand(2,3), [1,1], [2,1]);

julia&gt; blockcheckbounds(A, 3, 2)
ERROR: BlockBoundsError: attempt to access 2×2-blocked 2×3 BlockArrays.BlockArray{Float64,2,Array{Float64,2}} at block index [3,2]
[...]</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/abstractblockarray.jl#L260-L274">source</a></section><h2><a class="nav-anchor" id="BlockArray-1" href="#BlockArray-1">BlockArray</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.BlockArray" href="#BlockArrays.BlockArray"><code>BlockArrays.BlockArray</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">BlockArray{T, N, R &lt;: AbstractArray{T, N}} &lt;: AbstractBlockArray{T, N}</code></pre><p>A <code>BlockArray</code> is an array where each block is stored contiguously. This means that insertions and retrieval of blocks can be very fast and non allocating since no copying of data is needed.</p><p>In the type definition, <code>R</code> defines the array type that each block has, for example <code>Matrix{Float64}</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/blockarray.jl#L53-L60">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.uninitialized_blocks" href="#BlockArrays.uninitialized_blocks"><code>BlockArrays.uninitialized_blocks</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-none">uninitialized_blocks</code></pre><p>Alias for UninitializedBlocks(), which constructs an instance of the singleton type UninitializedBlocks (@ref), used in block array initialization to indicate the array-constructor-caller would like an uninitialized block array.</p><p>Examples ≡≡≡≡≡≡≡≡≡≡</p><p>julia&gt; BlockArray(uninitialized_blocks, Matrix{Float32}, [1,2], [3,2]) 2×2-blocked 3×5 BlockArrays.BlockArray{Float32,2,Array{Float32,2}}:  #undef  #undef  #undef  │  #undef  #undef  ––––––––––––┼––––––––  #undef  #undef  #undef  │  #undef  #undef  #undef  #undef  #undef  │  #undef  #undef</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/blockarray.jl#L28-L44">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.UninitializedBlocks" href="#BlockArrays.UninitializedBlocks"><code>BlockArrays.UninitializedBlocks</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">UninitializedBlocks</code></pre><p>Singleton type used in block array initialization, indicating the array-constructor-caller would like an uninitialized block array. See also uninitialized_blocks (@ref), an alias for UninitializedBlocks().</p><p>Examples ≡≡≡≡≡≡≡≡≡≡</p><p>julia&gt; BlockArray(uninitialized_blocks, Matrix{Float32}, [1,2], [3,2]) 2×2-blocked 3×5 BlockArrays.BlockArray{Float32,2,Array{Float32,2}}:  #undef  #undef  #undef  │  #undef  #undef  ––––––––––––┼––––––––  #undef  #undef  #undef  │  #undef  #undef  #undef  #undef  #undef  │  #undef  #undef</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/blockarray.jl#L9-L25">source</a></section><h2><a class="nav-anchor" id="PseudoBlockArray-1" href="#PseudoBlockArray-1">PseudoBlockArray</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BlockArrays.PseudoBlockArray" href="#BlockArrays.PseudoBlockArray"><code>BlockArrays.PseudoBlockArray</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">PseudoBlockArray{T, N, R} &lt;: AbstractBlockArray{T, N}</code></pre><p>A <code>PseudoBlockArray</code> is similar to a <a href="public.html#BlockArrays.BlockArray"><code>BlockArray</code></a> except the full array is stored contiguously instead of block by block. This means that is not possible to insert and retrieve blocks without copying data. On the other hand <code>Array</code> on a <code>PseudoBlockArray</code> is instead instant since it just returns the wrapped array.</p><p>When iteratively solving a set of equations with a gradient method the Jacobian typically has a block structure. It can be convenient to use a <code>PseudoBlockArray</code> to build up the Jacobian block by block and then pass the resulting matrix to a direct solver using <code>Array</code>.</p><pre><code class="language-julia-repl">julia&gt; srand(12345);

julia&gt; A = PseudoBlockArray(rand(2,3), [1,1], [2,1])
2×2-blocked 2×3 BlockArrays.PseudoBlockArray{Float64,2,Array{Float64,2}}:
 0.562714  0.371605  │  0.381128
 --------------------┼----------
 0.849939  0.283365  │  0.365801

julia&gt; A = PseudoBlockArray(sprand(6, 0.5), [3,2,1])
3-blocked 6-element BlockArrays.PseudoBlockArray{Float64,1,SparseVector{Float64,Int64}}:
 0.0
 0.586598
 0.0
 ---------
 0.0501668
 0.0
 ---------
 0.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaArrays/BlockArrays.jl/blob/50fd1ef4cd544cbc96baa71b5d20e6d3a1205209/src/pseudo_blockarray.jl#L8-L40">source</a></section><footer><hr/><a class="previous" href="../man/pseudoblockarrays.html"><span class="direction">Previous</span><span class="title">PseudoBlockArrays</span></a><a class="next" href="internals.html"><span class="direction">Next</span><span class="title">Internal Documentation</span></a></footer></article></body></html>
